import{G as y,b as h,a as u,c as a,j as e,k as v,l as x,n as b,_ as w,r as k,o as N,L as A,O as C,p as m,q as L,s as B}from"./index-4c13b4f8.js";import{B as f}from"./Button-1c7b815b.js";import{M as z}from"./Main-2fafb17a.js";import{u as g}from"./useJobApplication-d07bc3f1.js";import{M as o}from"./Modal-dbac4fe4.js";import{a as M}from"./index.esm-ebd52be7.js";import"./useOutsideClick-ae0e3bbc.js";function I(t){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M4 20v-6a8 8 0 1 1 16 0v6h1v2H3v-2h1zm2-6h2a4 4 0 0 1 4-4V8a6 6 0 0 0-6 6zm5-12h2v3h-2V2zm8.778 2.808l1.414 1.414-2.12 2.121-1.415-1.414 2.121-2.121zM2.808 6.222l1.414-1.414 2.121 2.12L4.93 8.344 2.808 6.222z"}}]}]})(t)}const W=({jobApplication:t})=>{const i=h(),l=new Date(t.createdAt).toLocaleDateString("he-IL"),n=t.todoList.some(r=>!r.completed),s=u();function c(){s(`/job-applications/${t.id}`)}function d(){i(v(t))}return a("div",{className:"flex items-center justify-between border-b border-gray-200 px-2 py-4 text-3xl md:px-4 md:text-3xl",children:[a("div",{className:"flex w-9/12 cursor-pointer items-center gap-1",onClick:c,children:[n&&e(I,{className:"warning-icon"}),a("p",{className:"flex items-center gap-[2px] overflow-hidden text-ellipsis whitespace-nowrap",children:[e("span",{className:"font-semibold text-gray-800",children:t.company}),e("span",{children:"-"}),e("span",{children:t.position}),e("span",{className:"hidden sm:inline",children:"-"}),e("span",{className:"hidden sm:inline",children:t.status}),e("span",{className:"hidden md:inline",children:"-"}),e("span",{className:"hidden md:inline",children:l})]})]}),a("div",{className:"flex w-3/12 items-center justify-end gap-2 md:gap-4 md:text-2xl",children:[t.url&&e("a",{href:t.url,target:"_blank",rel:"noreferrer noopener",className:"ml-2",children:e("button",{className:"hidden items-center justify-center rounded-full bg-gray-600 px-4 py-2 text-gray-100 transition-all duration-300 hover:scale-110 hover:bg-gray-800 sm:flex md:px-6",type:"button",children:"Link"})}),a(o,{children:[e(o.OpenBtn,{modalName:"archiveModal",children:e("button",{children:e(M,{className:"text-5xl md:text-6xl"})})}),a(o.Window,{name:"archiveModal",className:"fixed left-1/2 top-1/2 z-[1500] flex max-w-[320px] -translate-x-1/2 -translate-y-1/2 transform flex-col items-center rounded-lg bg-gray-600 p-8 text-gray-100 shadow-xl",children:[e("h3",{className:"text-3xl font-semibold text-gray-200 md:text-3xl",children:"Are you sure you want to remove this application?"}),a("div",{className:"mt-2 flex items-center gap-4",children:[e(o.CloseBtn,{className:"rounded-full bg-gray-600 px-5 py-3 text-lg font-medium uppercase text-gray-200 transition-all hover:scale-105",children:e("button",{children:"Cancel"})}),e(o.CloseBtn,{className:"rounded-full bg-gray-600 px-5 py-3 text-lg font-medium uppercase text-gray-200 transition-all hover:scale-105",onClickFn:d,children:e("button",{children:"remove"})})]})]})]})]})]})},p=({title:t,applications:i})=>{if(i.length===0)return null;const l=i.length;return a("div",{className:"w-full bg-white py-4 shadow-md md:rounded-lg",children:[a("h2",{className:"mb-4 px-2 text-4xl font-semibold text-gray-800 md:px-4",children:[t," (",l," ",l===1?"application":"applications",")"]}),e("ul",{children:i.map(s=>e("li",{children:e(W,{jobApplication:s})},s.id))})]})},J=()=>{const{categorizedApplications:t}=g();return a("div",{className:"flex w-full max-w-[800px] flex-col gap-8",children:[e(p,{title:"This Week",applications:t.thisWeek}),e(p,{title:"Last Week",applications:t.lastWeek}),e(p,{title:"Earlier",applications:t.earlier})]})},O=()=>{const{loggedInUser:t}=x();function i(n){b(n),w.success("Link copied to clipboard",{style:{background:"#333",color:"#fff",fontSize:"13px",fontWeight:"600"}})}if(!t)return null;const l=[{name:"LinkedIn",link:t.linkedInProfile},{name:"GitHub",link:t.githubProfile},{name:"Portfolio",link:t.portfolio}];return e("div",{className:"my-3 flex w-full max-w-[700px] items-center justify-between px-3",children:l.map(n=>n.link?e(f,{className:"rounded-full border-2 border-white px-6 py-3 text-4xl text-white",onClickFn:()=>i(n.link),children:n.name},n.name):null)})},G=()=>{const{loggedInUser:t}=x(),{applications:i,addApplicationState:l}=g(),n=h(),s=u();async function c(){if(!t)return;const d=m.getDefaultJobApplication(t.id),r=await m.add(d);n(L([r,...i])),n(B(r)),s(`/job-applications/edit/${r.id}`)}return k.useEffect(()=>{n(N())},[n]),a(z,{className:"flex w-full flex-1 flex-col items-center gap-5 pb-24 pt-5",children:[e(O,{}),e(f,{className:"flex h-20 items-center justify-center justify-self-start rounded-full bg-gray-600 px-7 text-3xl font-medium leading-none tracking-wide text-gray-100 transition-all duration-300 hover:scale-110 md:h-14 md:text-2xl",onClickFn:c,children:l.state==="loading"?e(A,{}):e("span",{children:"Add"})}),e(J,{}),e(C,{})]})};export{G as default};
