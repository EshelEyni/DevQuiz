import{a as P,W as L,G as E,b as F,t as q,r as g,c as r,F as c,j as e,L as j,X as M,Y as T}from"./index-1f2d8112.js";import{M as k}from"./MainScreen-bea2d245.js";import{c as A,B as h}from"./Button-6f10587e.js";import{u as I}from"./index.esm-d663fa69.js";import{E as u}from"./ErrMsg-e2ed7b40.js";function B(){const n=P(),t=L();function a(){const i=t.pathname.substring(0,t.pathname.lastIndexOf("/"));n(i)}return a}function G(n){return E({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(n)}const z={username:"",email:"",password:"",passwordConfirm:""},W=()=>{const n=F(),t=B(),{queryState:a}=q(),i=a.state==="loading",[s,w]=g.useState(!0),{register:m,handleSubmit:y,formState:{errors:o},watch:b,clearErrors:p,reset:f}=I({defaultValues:z}),x=g.useRef({});x.current=b("password","");function N(l){if(s){const{username:S,password:C}=l;n(M(S,C))}else n(T(l))}function v(){p(),w(l=>!l)}const d="w-full rounded border text-gray-950 border-gray-300 px-2 text-2xl focus:border-blue-500 focus:outline-none h-16 md:h-12";return g.useEffect(()=>{if(a.state==="succeeded")return t(),()=>{f(),p()}},[f,p,a.state,t]),r(c,{children:[e(k,{onClickFn:t,darkMode:!0}),r("main",{className:A("h- fixed left-1/2 top-1/2 z-[1000] flex h-full min-h-min w-full max-w-[1200px] -translate-x-1/2 -translate-y-1/2 flex-col items-center overflow-scroll bg-gray-50 px-3 pt-5 md:h-1/2 md:w-1/2 md:rounded-xl",{"justify-center":i}),children:[i&&e(j,{}),!i&&r(c,{children:[e(h,{className:"flex h-10 w-10 items-center justify-center self-end rounded-full text-center hover:bg-gray-200 hover:text-gray-700 md:!hidden",onClickFn:t,children:e(G,{className:"text-3xl"})}),e("h1",{className:"mb-6 mt-10 text-center text-6xl font-bold text-gray-700 md:mt-0 md:text-5xl",children:s?"Login":"Sign up"}),r("form",{onSubmit:y(N),className:"flex w-full max-w-xl flex-col items-center justify-center gap-4 rounded-lg p-3 sm:max-w-2xl md:max-w-md",children:[e("input",{...m("username",{required:"Username is required"}),placeholder:"Username",className:d}),o.username&&e(u,{msg:o.username.message}),!s&&r(c,{children:[e("input",{...m("email",{required:!0,pattern:/^\S+@\S+\.\S+$/}),placeholder:"Email",className:d}),o.email&&e(u,{msg:o.email.type==="required"?"Email is required":"Email is invalid"})]}),e("input",{type:"password",...m("password",{required:!0}),placeholder:"Password",className:d}),!s&&r(c,{children:[e("input",{...m("passwordConfirm",{validate:l=>l===x.current||"The passwords do not match"}),type:"password",placeholder:"Confirm Password",className:d}),o.passwordConfirm&&e(u,{msg:o.passwordConfirm.message})]}),e(h,{type:"submit",className:"mt-2 rounded-full bg-gray-700 px-8 py-6 text-4xl font-medium leading-none text-white transition-all duration-300 hover:scale-105 md:px-4 md:py-2 md:text-xl",children:s?"Login":"Sign up"}),r("p",{className:"mt-6 text-3xl text-gray-700 md:text-lg",children:[s?"Don't have an account? ":"Already have an account? ",e("span",{onClick:v,className:"cursor-pointer text-blue-500 hover:underline",children:s?"Sign up":"Log in"})]})]}),a.state==="failed"&&e(u,{msg:a.error})]})]})]})};export{W as default};
